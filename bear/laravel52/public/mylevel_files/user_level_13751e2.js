!function(t){function s(s){t.ajax({url:s.url,data:s.data,dataType:"jsonp",success:function(t){s.callback&&s.callback(t)},error:function(){window.console&&console.log("获取数据失败！")}})}function e(s){var e=".task-id"+s;t(e).find(".task-status").removeClass("ststus-receive").addClass("ststus-received"),t(e).find(".task-status a").text("已完成")}var n=/test|develop/g.test(location.href)?"//test.q.huya.com/":"//q.huya.com/",a={init:function(){this.bindEvents()},bindEvents:function(){var a=t("#task-content"),i=t("#getTask"),o=t(".mask_bg");a.on("click",".ststus-receive a",function(){var a=t(this).attr("task-id"),c=t(this).attr("data-exper"),d={910:"<p>奖励已领</p>",913:"<p>任务已下线</p>",914:"<p>任务未完成</p>"},l={url:n+"yy/index.php?m=User&do=doGetTaskPrize",data:{taskId:a},callback:function(s){if(200==s.status){var n=s.data.code,l="";if(0==n){l="<p>领取成功</p><p>获得EXP+<span>"+c+"</span></p>",e(a);var r=!1;0==t(".ststus-receive").length&&(r=!0),TT.event.emit("AWARD_PRIZE_NOTICE_FROM_I",a,r)}else i.find(".btn-close,.btn").removeClass("reload"),l=d[n]}else l="<p>"+s.msg+"</p>";i.find(".cont-tips").html(l),o.show(),i.show()}};s(l)}),i.on("click",".btn-close,.btn",function(){o.hide(),i.hide()}),TT.event.on("AWARD_PRIZE_NOTICE_FROM_MAIN",function(t){e(t.id)})}};a.init()}(jQuery);